import{i as R,j as r,k as g,l as p,b as o,m as B,a as I,w as u,E as L,n as P,p as F,q as m,s as W,t as O,D as $,x as G,F as H,d as J,y as q,z as A,u as D,A as M,o as f,B as K,C as Q,_ as X}from"./index-dlEj4opF.js";/* empty css                    *//* empty css                     *//* empty css                        *//* empty css                  */const Y={class:"cropper"},Z={style:{display:"flex","align-items":"center","justify-content":"center"}},ee={class:"upload-section"},le=R({__name:"Cropper",setup(oe){const l=r({img:"",outputSize:92,autoCropWidth:10,autoCropHeight:10,outputType:"",info:!0,canScale:!0,autoCrop:!0,full:!1,infoTrue:!1,mode:"contain",original:!1,maxImgSize:"10000"}),v=["jpeg","png","webp"],c=r(!1),b=r(),_=r(),d=r(""),y=t=>new Promise((e,n)=>{const s=new Image;s.onload=()=>{e({url:URL.createObjectURL(t),height:s.height,width:s.width,outputType:t.type.split("/")[1],fileName:t.name})},s.onerror=()=>n(new Error("图片加载失败")),s.src=URL.createObjectURL(t)}),C=async t=>{const e=t.raw;if(!e)return;if(!["image/jpeg","image/png","image/webp"].includes(e.type)){Q.error("只支持 JPG/PNG/WEBP 格式的图片");return}l.value.img="",l.value.outputType="",d.value="";const n=await y(e);l.value.img=n.url,l.value.outputType=n.outputType,d.value=n.fileName,l.value.autoCropWidth=n.width,l.value.autoCropHeight=n.height},w=()=>{_.value.getCropBlob(t=>{const e=document.createElement("a");let n=d.value.replace(/\.(jpg|jpeg|png|webp)$/i,`.${l.value.outputType}`);e.download=`new_${n}`,e.href=URL.createObjectURL(t),e.click()})},h=t=>{console.log(t),t?l.value.infoTrue=!1:l.value.infoTrue=!0},V=t=>{};return(t,e)=>{const n=I("vueCropper"),s=W,i=F,E=O,x=$,T=K,k=G,U=q,S=L,j=A,z=P;return f(),g("div",Y,[p("div",{class:"crop",ref_key:"crop",ref:b},[o(n,B({ref_key:"cropper",ref:_},l.value,{outputSize:l.value.outputSize/100,onRealTime:V}),null,16,["outputSize"])],512),o(S,{inline:""},{default:u(()=>[o(i,{label:"宽高"},{default:u(()=>[p("div",Z,[o(s,{style:{width:"100px"},disabled:!l.value.img,"controls-position":"right",modelValue:l.value.autoCropWidth,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.autoCropWidth=a)},null,8,["disabled","modelValue"]),e[5]||(e[5]=m(" × ")),o(s,{style:{width:"100px"},disabled:!l.value.img,"controls-position":"right",modelValue:l.value.autoCropHeight,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.autoCropHeight=a)},null,8,["disabled","modelValue"])])]),_:1}),o(i,{label:""},{default:u(()=>[o(E,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),onChange:h},{default:u(()=>e[6]||(e[6]=[m("固定尺寸")])),_:1,__:[6]},8,["modelValue"])]),_:1}),o(i,{label:`压缩质量 (${l.value.outputSize}%)`},{default:u(()=>[o(x,{style:{width:"160px"},modelValue:l.value.outputSize,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.outputSize=a),min:1,max:100,disabled:!l.value.img},null,8,["modelValue","disabled"])]),_:1},8,["label"]),o(i,{label:"输出格式"},{default:u(()=>[o(k,{style:{width:"140px"},modelValue:l.value.outputType,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.outputType=a),disabled:!l.value.img},{default:u(()=>[(f(),g(H,null,J(v,(a,N)=>o(T,{key:N,label:`image/${a}`,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1}),o(i,{label:""},{default:u(()=>[o(U,{type:"primary",onClick:w},{default:u(()=>e[7]||(e[7]=[m("保存")])),_:1,__:[7]})]),_:1})]),_:1}),p("div",ee,[o(z,{class:"upload-drop-zone",drag:"","auto-upload":!1,accept:"image/*","show-file-list":!1,onChange:C},{default:u(()=>[o(j,{class:"upload-icon"},{default:u(()=>[o(D(M))]),_:1}),e[8]||(e[8]=p("div",{class:"upload-text"},[p("h3",null,"将多张图片拖到此处，或点击上传"),p("p",null,"支持 PNG/JPG/WEBP 格式")],-1))]),_:1,__:[8]})])])}}}),pe=X(le,[["__scopeId","data-v-7cd36709"]]);export{pe as default};
